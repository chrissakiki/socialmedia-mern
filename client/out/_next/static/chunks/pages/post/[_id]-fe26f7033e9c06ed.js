(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[393],{1965:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(1413),r=n(7294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"},c=n(2135),i=function(e,t){return r.createElement(c.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:t,icon:a}))};i.displayName="RollbackOutlined";var o=r.forwardRef(i)},3232:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[_id]",function(){return n(3405)}])},4870:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var s=function(e){return e.image?e.image.url:"/images/defaultuser.png"}},1133:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var s=n(5893),r=(n(7294),n(8341)),a=n.n(r),c=n(381),i=n.n(c),o=n(5692),l=function(e){var t=e.url;return(0,s.jsx)("div",{style:{backgroundImage:"url(".concat(t,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",height:"300px"}})},u=n(4447),d=n(9647),m=n(1255),f=n(6548),p=n(2714),h=n(5144),x=n(1163),v=n(4870),g=n(1664),j=function(e){var t=e.post,n=(e.handleDelete,e.handleLike),r=e.handleDislike,c=e.handleComment,j=e.commentsCount,k=void 0===j?2:j,N=e.removeComment,b=e.Deleting,y=(0,x.useRouter)(),C=(0,h.a)().state;return(0,s.jsx)(s.Fragment,{children:t&&t.postedBy&&(0,s.jsxs)("div",{className:"card mb-5",children:[(0,s.jsx)("div",{className:"card-header",children:(0,s.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,s.jsxs)("div",{className:"d-flex align-items-center",children:[(0,s.jsx)(o.C,{size:40,src:(0,v.d)(t.postedBy)}),(0,s.jsxs)("span",{className:"text-primary",style:{marginLeft:"1rem",fontWeight:"bold",fontSize:"1.1rem"},children:[" ",(0,s.jsx)(g.default,{href:"/user/".concat(t.postedBy.username),children:t.postedBy.name})," "]})]}),(0,s.jsx)("span",{className:"",style:{marginLeft:"1rem"},children:i()(t.createdAt).fromNow()})]})}),(0,s.jsx)("div",{className:"card-body",children:a()(t.content)}),(0,s.jsxs)("div",{className:"card-footer",children:[t.image&&(0,s.jsx)(l,{url:t.image.url}),(0,s.jsxs)("div",{className:"d-flex pt-2",children:[C&&C.user&&t.likes&&t.likes.includes(C.user._id)?(0,s.jsx)(u.Z,{onClick:function(){return r(t._id)},className:"text-danger pt-2 h5"}):(0,s.jsx)(d.Z,{onClick:function(){return n(t._id)},className:"text-danger pt-2 h5"}),(0,s.jsxs)("div",{className:"pt-2",style:{marginLeft:"0.3rem",marginRight:"1rem"},children:[t.likes&&t.likes.length," ",1==t.likes.length?"like":"likes"]}),(0,s.jsx)(m.Z,{onClick:function(){return c(t)},className:"text-danger pt-2 h5"}),(0,s.jsx)("div",{className:"pt-2",style:{marginLeft:"0.3rem"},children:(0,s.jsx)(g.default,{href:"/post/".concat(t._id),children:(0,s.jsxs)("a",{children:[t.comments&&t.comments.length," ",1==t.comments.length?"comment":"comments"]})})}),C&&C.user&&C.user._id===t.postedBy._id&&(0,s.jsxs)("div",{className:"ms-auto",children:[(0,s.jsx)(f.Z,{onClick:function(){return y.push("/user/post/".concat(t._id))},className:"text-danger pt-2 h5 px-4"}),(0,s.jsx)(p.Z,{onClick:function(){return b(t)},className:"text-danger pt-2 h5"})]})]})]}),t.comments&&t.comments.length>0&&(0,s.jsx)("ol",{className:"list-group",children:t.comments.slice(0,k).map((function(e){return(0,s.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-start",children:[(0,s.jsxs)("div",{className:"ms-2 me-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(o.C,{size:20,className:"mb-1 mr-3",src:(0,v.d)(e.postedBy[0])}),(0,s.jsx)("span",{className:"mx-2 text-primary",children:e.postedBy[0].name})]}),(0,s.jsx)("div",{className:"mt-2",children:e.text})]}),(0,s.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:i()(e.created).fromNow()}),C&&C.user&&C.user._id===e.postedBy[0]._id&&(0,s.jsx)("div",{children:(0,s.jsx)(p.Z,{onClick:function(){return N(t._id,e._id)},className:"mt-2 text-danger"})})]})]},e._id)}))})]},t._id)})}},6723:function(e,t,n){"use strict";var s=n(5893);n(7294);t.Z=function(e){var t=e.addComment,n=e.comment,r=e.setComment;return(0,s.jsxs)("form",{onSubmit:t,children:[(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Write your comment here",value:n,onChange:function(e){return r(e.target.value)}}),(0,s.jsx)("button",{className:"btn btn-primary btn-sm btn-block mt-3",children:"Add Comment"})]})}},3405:function(e,t,n){"use strict";n.r(t);var s=n(5666),r=n.n(s),a=n(5893),c=n(7294),i=n(1163),o=n(9669),l=n.n(o),u=n(1133),d=n(1664),m=n(1965),f=n(6723),p=n(9848),h=n(5538),x=n(5144);function v(e,t,n,s,r,a,c){try{var i=e[a](c),o=i.value}catch(l){return void n(l)}i.done?t(o):Promise.resolve(o).then(s,r)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var a=e.apply(t,n);function c(e){v(a,s,r,c,i,"next",e)}function i(e){v(a,s,r,c,i,"throw",e)}c(void 0)}))}}t.default=function(){var e=(0,c.useState)({}),t=e[0],n=e[1],s=(0,x.a)(),o=s.comment,v=s.setComment,j=s.visible,k=s.setVisible,N=s.currentPost,b=s.setCurrentPost,y=s.deleting,C=s.setDeleting,_=s.dltPost,w=s.setDltPost,Z=(0,i.useRouter)(),D=Z.query._id;(0,c.useEffect)((function(){D&&P()}),[D]);var P=g(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().get("/user-post/".concat(D));case 3:t=e.sent.data,n(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),A=g(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().put("/like-post",{_id:t});case 3:e.sent.data,P(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.Am.error("Couldn't like this post! please try again");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),B=g(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().put("/dislike-post",{_id:t});case 3:e.sent.data,P(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.Am.error("Couldn't dislike this post! please try again");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),E=g(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,l().put("/add-comment",{postId:N._id,comment:o});case 4:e.sent.data,v(""),k(!1),P(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),h.Am.error("Couldn't add a comment! please try again");case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),L=g(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().put("/remove-comment",{postId:t,comment:n});case 3:e.sent.data,P(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h.Am.error("Couldn't remove this comment! please try again");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),R=g(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().delete("/delete-post/".concat(t._id));case 3:e.sent.data,h.Am.success("Post Deleted"),Z.push("/user/dashboard"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.Am.error("Couldn't delete this post! please try again");case 11:C(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsx)("div",{className:"col-md-8 offset-md-2 mt-5",children:(0,a.jsx)(u.Z,{commentsCount:100,post:t,handleLike:A,handleDislike:B,handleComment:function(e){b(e),k(!0)},removeComment:L,Deleting:function(e){C(!0),w(e)}})}),(0,a.jsx)(d.default,{href:"/user/dashboard",children:(0,a.jsx)("a",{className:"d-flex justify-content-center p-5 h3",children:(0,a.jsx)(m.Z,{})})}),(0,a.jsx)(p.Z,{visible:j,onCancel:function(){return k(!1)},title:"Comment",footer:null,children:(0,a.jsx)(f.Z,{comment:o,setComment:v,addComment:E})}),(0,a.jsx)(p.Z,{visible:y,onCancel:function(){return C(!1)},title:"Delete",onOk:function(){return R(_)},children:"Are you sure you want to delete this post?"})]})}},2361:function(){},4616:function(){}},function(e){e.O(0,[885,844,848,199,692,764,506,774,888,179],(function(){return t=3232,e(e.s=t);var t}));var t=e.O();_N_E=t}]);