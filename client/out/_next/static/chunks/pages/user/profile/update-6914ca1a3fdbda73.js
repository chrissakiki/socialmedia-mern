(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[646],{8916:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(1413),n=a(7294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"},c=a(2135),l=function(e,t){return n.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};l.displayName="CameraOutlined";var u=n.forwardRef(l)},8165:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(1413),n=a(7294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},c=a(2135),l=function(e,t){return n.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};l.displayName="SyncOutlined";var u=n.forwardRef(l)},2568:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/profile/update",function(){return a(673)}])},8073:function(e,t,a){"use strict";var r=a(5893),n=(a(7294),a(8165));t.Z=function(e){var t=e.handleSubmit,a=e.name,s=e.setName,c=e.email,l=e.setEmail,u=e.password,o=e.setPassword,i=e.loading,m=e.page,d=e.username,f=e.setUsername,p=e.about,h=e.setAbout,v=e.profileUpdate;return(0,r.jsxs)("form",{onSubmit:t,autoComplete:"off",children:[v&&(0,r.jsxs)("div",{className:"form-group p-2",children:[(0,r.jsx)("label",{className:"text-muted",children:"Username"}),(0,r.jsx)("input",{value:d,onChange:function(e){return f(e.target.value.replace(/[^a-zA-Z-0-9-_]/gi,""))},type:"text",className:"form-control",placeholder:"Enter username"})]}),"Login"!==m&&(0,r.jsxs)("div",{className:"form-group p-2",children:[(0,r.jsx)("label",{className:"text-muted",children:"Your Name"}),(0,r.jsx)("input",{value:a,onChange:function(e){return s(e.target.value.replace(/[^a-zA-Z\s]/gi,""))},type:"text",className:"form-control",placeholder:"Enter your name"})]}),(0,r.jsxs)("div",{className:"form-group p-2",children:[(0,r.jsx)("label",{className:"text-muted",children:"Email address"}),(0,r.jsx)("input",{value:c,disabled:v,onChange:function(e){return l(e.target.value.replace(/[^a-z-0-9-@.]/gi,""))},type:"email",className:"form-control",placeholder:"Enter your email"})]}),(0,r.jsxs)("div",{className:"form-group p-2",children:[(0,r.jsx)("label",{className:"text-muted",children:"Password"}),(0,r.jsx)("input",{value:u,onChange:function(e){return o(e.target.value)},type:"password",className:"form-control",placeholder:"Enter password",autoComplete:"new-password"})]}),v&&(0,r.jsxs)("div",{className:"form-group p-2",children:[(0,r.jsx)("label",{className:"text-muted",children:"About"}),(0,r.jsx)("textarea",{value:p,onChange:function(e){return h(e.target.value)},className:"form-control",style:{resize:"none"},placeholder:"write more about yourself"})]}),(0,r.jsx)("div",{className:"form-group p-2",children:(0,r.jsx)("button",{disabled:v?i:"Login"===m?!c||!u||i:!a||!c||!u||i,className:"btn btn-primary col-12 btn-lg",children:i?(0,r.jsx)(n.Z,{spin:!0,className:"py-1"}):"Submit"})})]})}},1080:function(e,t,a){"use strict";var r=a(5666),n=a.n(r),s=a(5893),c=a(7294),l=a(9669),u=a.n(l),o=a(1163),i=a(8165),m=a(5144);function d(e,t,a,r,n,s,c){try{var l=e[s](c),u=l.value}catch(o){return void a(o)}l.done?t(u):Promise.resolve(u).then(r,n)}t.Z=function(e){var t,a=e.children,r=(0,c.useState)(!1),l=r[0],f=r[1],p=(0,o.useRouter)(),h=(0,m.a)().state,v=(t=n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get("/current-user");case 3:e.sent.data.ok&&f(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p.push("/login");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var e=this,a=arguments;return new Promise((function(r,n){var s=t.apply(e,a);function c(e){d(s,r,n,c,l,"next",e)}function l(e){d(s,r,n,c,l,"throw",e)}c(void 0)}))});return null===h&&setTimeout((function(){v()}),1e3),(0,c.useEffect)((function(){h&&h.token&&v()}),[h&&h.token]),l?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsx)(i.Z,{spin:!0,className:"d-flex justify-content-center align-items-center display-1 text-primary p-5"})}},673:function(e,t,a){"use strict";a.r(t);var r=a(5666),n=a.n(r),s=a(5893),c=a(7294),l=a(9669),u=a.n(l),o=a(5538),i=a(5692),m=a(9848),d=a(8073),f=a(5144),p=(a(1163),a(888)),h=a(8916),v=a(1080);function x(e,t,a,r,n,s,c){try{var l=e[s](c),u=l.value}catch(o){return void a(o)}l.done?t(u):Promise.resolve(u).then(r,n)}function g(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function c(e){x(s,r,n,c,l,"next",e)}function l(e){x(s,r,n,c,l,"throw",e)}c(void 0)}))}}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){b(e,t,a[t])}))}return e}t.default=function(){var e=(0,c.useState)(""),t=e[0],a=e[1],r=(0,c.useState)(""),l=r[0],x=r[1],b=(0,c.useState)(""),N=b[0],y=b[1],w=(0,c.useState)(""),S=w[0],Z=w[1],E=(0,c.useState)(""),C=E[0],_=E[1],k=(0,c.useState)(!1),O=k[0],P=k[1],z=(0,c.useState)(!1),A=z[0],U=z[1],H=(0,c.useState)({}),D=H[0],L=H[1],M=(0,c.useState)(!1),R=M[0],T=M[1],B=(0,f.a)(),F=B.state,I=B.setState;(0,c.useEffect)((function(){F&&F.user&&(a(F.user.username),x(F.user.about),y(F.user.name),Z(F.user.email),L(F.user.image))}),[F&&F.user]);var J=g(n().mark((function e(a){var r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,U(!0),e.next=5,u().put("/profile-update",{username:t,name:N,email:S,password:C,about:l,image:D});case 5:r=e.sent.data,(s=JSON.parse(localStorage.getItem("auth"))).user=r,localStorage.setItem("auth",JSON.stringify(s)),I(j({},F,{user:r})),P(!0),U(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),o.Am.error(e.t0.response.data.message),U(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])}))),V=g(n().mark((function e(t){var a,r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],(r=new FormData).append("image",a),T(!0),e.prev=4,e.next=7,u().post("/upload-image",r);case 7:s=e.sent.data,L({url:s.url,public_id:s.public_id}),T(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),o.Am.error(e.t0.response.data.message),T(!1);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return(0,s.jsx)(v.Z,{children:(0,s.jsxs)("div",{className:"container-fluid",children:[(0,s.jsx)("div",{className:"row py-5",children:(0,s.jsxs)("div",{className:"col-md-6 offset-md-3",children:[(0,s.jsxs)("label",{className:"d-flex justify-content-center py-2",children:[D&&D.url?(0,s.jsx)(i.C,{size:100,src:D.url,className:"mt-1 h1"}):R?(0,s.jsx)(p.Z,{className:"my-3"}):(0,s.jsxs)("div",{className:"d-flex flex-column",children:[(0,s.jsx)(h.Z,{size:60,className:"my-3 h1 text-primary"}),(0,s.jsx)("p",{children:" Set a profile picture "})]}),(0,s.jsx)("input",{onChange:V,type:"file",accept:"images/*",hidden:!0})]}),(0,s.jsx)(d.Z,{profileUpdate:!0,handleSubmit:J,name:N,setName:y,email:S,setEmail:Z,password:C,setPassword:_,loading:A,username:t,setUsername:a,about:l,setAbout:x})]})}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("div",{className:"col",children:(0,s.jsx)(m.Z,{title:"Updated Successfully",visible:O,onCancel:function(){return P(!1)},footer:null,children:(0,s.jsx)("p",{children:"Updated Successfully"})})})})]})})}}},function(e){e.O(0,[844,848,199,692,774,888,179],(function(){return t=2568,e(e.s=t);var t}));var t=e.O();_N_E=t}]);